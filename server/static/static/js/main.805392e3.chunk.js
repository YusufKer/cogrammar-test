(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{140:function(e,t,n){},150:function(e,t){},152:function(e,t){},165:function(e,t){},167:function(e,t){},195:function(e,t){},196:function(e,t){},201:function(e,t){},203:function(e,t){},210:function(e,t){},229:function(e,t){},259:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(131),a=n.n(s),o=(n(140),n(21)),i=n(6),u=n(15),j=n.n(u),l=n(22),b=n(2);function p(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(i.e)(),c=function(){var r=Object(l.a)(j.a.mark((function r(c){var s,a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.next=3,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.current.value,password:t.current.value})});case 3:return s=r.sent,r.next=6,s.json();case 6:(a=r.sent).user?(alert("Login Successful"),localStorage.setItem("token",a.user),n.replace("/dashboard")):alert("Please check details");case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:c,children:[Object(b.jsx)("input",{type:"email",placeholder:"Email",ref:e}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",placeholder:"Password",ref:t}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Submit"})]}),Object(b.jsx)(o.b,{to:"/register",children:"Register"})]})}function f(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),c=Object(r.useRef)(),s=function(){var r=Object(l.a)(j.a.mark((function r(c){var s,a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.next=3,fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.current.value,email:t.current.value,password:n.current.value})});case 3:return s=r.sent,r.next=6,s.json();case 6:a=r.sent,console.log(a);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Register"}),Object(b.jsxs)("form",{onSubmit:s,children:[Object(b.jsx)("input",{type:"text",placeholder:"Username",ref:e}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"email",placeholder:"Email",ref:t}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",placeholder:"Password",ref:n}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",placeholder:"Confirm Password",ref:c}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Submit"})]}),Object(b.jsx)(o.b,{to:"/login",children:"Login"})]})}var d=n(135),h=n(134),O=n.n(h);function x(){var e=Object(i.e)(),t=Object(r.useState)(),n=Object(d.a)(t,2),c=n[0],s=n[1],a=Object(r.useRef)();function o(){return(o=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/bio",{headers:{"x-access-token":localStorage.getItem("token")}});case 2:return t=e.sent,e.next=5,t.json();case 5:"ok"===(n=e.sent).status?s(n.user.bio):alert(n.error);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=function(){var e=Object(l.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://localhost:5000/api/bio",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify({bio:a.current.value})});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,s(r.user.bio);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var t=localStorage.getItem("token");if(t){var n=O.a.decode(t);console.log(n),n?function(){o.apply(this,arguments)}():(localStorage.removeItem("token"),e.replace("/login"))}}),[]),Object(b.jsxs)("div",{className:"dashboard",children:["Bio: ",c&&c,Object(b.jsxs)("form",{onSubmit:u,children:[Object(b.jsx)("input",{type:"text",placeholder:"bio",ref:a}),Object(b.jsx)("button",{type:"submit",children:"Submit"})]})]})}n(259);var m=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(i.a,{path:"/login",children:Object(b.jsx)(p,{})}),Object(b.jsx)(i.a,{path:"/register",children:Object(b.jsx)(f,{})}),Object(b.jsx)(i.a,{path:"/dashboard",children:Object(b.jsx)(x,{})})]})})};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.805392e3.chunk.js.map